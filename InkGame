-- Load WindUI
local Version = "1.6.31"
local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/download/" .. Version .. "/main.lua"))()

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

-- Variables
local WalkSpeedValue, JumpPowerValue = 16, 50
local SpeedEnabled = false

-- Create Window
local Window = WindUI:CreateWindow({
	Title = "Ink Game Script",
	Icon = "rbxassetid://4483345998",
	Author = "Script Creator",
	Folder = "InkGameConfig",
	Size = UDim2.fromOffset(580, 460),
	KeySystem = {
		Key = "InkGameKey2024",
		Note = "Join our Discord for the key!",
		URL = "https://discord.gg/example",
		SaveKey = true
	},
	Transparent = true,
	Theme = "Dark",
	SideBarWidth = 170
})

-- === RED LIGHT TAB ===
local redLightTab = Window:Tab({
	Title = "RedLight",
	Icon = "lightbulb"
})

redLightTab:Button({
	Title = "Win Red Light Green Light",
	Callback = function()
		local pos = Vector3.new(-46.143, 1023.516, 135.9)
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character:PivotTo(CFrame.new(pos))
		end
	end
})

redLightTab:Button({
	Title = "Teleport to Start",
	Callback = function()
		local startPos = Vector3.new(0, 1000, 0)
		if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
			LocalPlayer.Character:PivotTo(CFrame.new(startPos))
		end
	end
})

-- === DALGONA TAB ===
local dalgonaTab = Window:Tab({
	Title = "Dalgona",
	Icon = "cookie"
})

-- Dalgona Auto-Complete Variables
local dalgonaEnabled = false
local dalgonaSpeed = 5
local dalgonaConnection = nil

dalgonaTab:Toggle({
	Title = "Auto Complete Dalgona",
	Default = false,
	Callback = function(state)
		dalgonaEnabled = state
		if dalgonaEnabled then
			-- Start auto-clicking for Dalgona
			dalgonaConnection = RunService.RenderStepped:Connect(function()
				if dalgonaEnabled then
					-- Check if we're in the Dalgona game
					local dalgonaOutline = workspace.Effects:FindFirstChild("UmbrellaOutline") or 
					                      workspace.Effects:FindFirstChild("StarOutline") or 
					                      workspace.Effects:FindFirstChild("CircleOutline") or 
					                      workspace.Effects:FindFirstChild("TriangleOutline") or 
					                      workspace.Effects:FindFirstChild("SackBoyOutline") or 
					                      workspace.Effects:FindFirstChild("MonaLisaOutline")
					
					if dalgonaOutline then
						-- Simulate mouse clicks on the outline parts
						for _, part in pairs(dalgonaOutline:GetChildren()) do
							if part:IsA("BasePart") and not part:GetAttribute("Done") then
								-- Simulate precise clicking with speed control
								local clickRate = dalgonaSpeed / 10
								if math.random() < clickRate then
									-- Fire a virtual click event
									local virtualInputService = game:GetService("VirtualInputManager")
									local camera = workspace.CurrentCamera
									local screenPoint = camera:WorldToViewportPoint(part.Position)
									
									if screenPoint.Z > 0 then -- Part is visible on screen
										virtualInputService:SendMouseButtonEvent(screenPoint.X, screenPoint.Y, 0, true, game, 1)
										wait(0.01)
										virtualInputService:SendMouseButtonEvent(screenPoint.X, screenPoint.Y, 0, false, game, 1)
										wait(0.05) -- Small delay between clicks
									end
								end
							end
						end
					end
				end
			end)
		else
			if dalgonaConnection then
				dalgonaConnection:Disconnect()
				dalgonaConnection = nil
			end
		end
	end
})

dalgonaTab:Slider({
	Title = "Auto-Click Speed",
	Default = 5,
	Min = 1,
	Max = 10,
	Callback = function(value)
		dalgonaSpeed = value
	end
})

dalgonaTab:Button({
	Title = "Perfect Trace Mode",
	Callback = function()
		-- Enhanced auto-complete that follows the exact outline
		if workspace.Effects:FindFirstChildOfClass("Model") then
			for _, model in pairs(workspace.Effects:GetChildren()) do
				if model.Name:find("Outline") then
					for _, part in pairs(model:GetChildren()) do
						if part:IsA("BasePart") and not part:GetAttribute("Done") then
							-- Mark as completed instantly
							part:SetAttribute("Done", true)
							part.Color = Color3.fromRGB(0, 255, 0)
							part.Transparency = 0
							part.CastShadow = false
							part.Name = "DalgonaClickPart"
							part.Material = Enum.Material.Neon
							part.Position = part.Position + Vector3.new(0, 0.005, 0)
						end
					end
				end
			end
		end
	end
})

-- === TUG OF WAR TAB ===
local tugOfWarTab = Window:Tab({
	Title = "Tug Of War",
	Icon = "zap"
})

tugOfWarTab:Button({
	Title = "Auto Win Tug of War",
	Callback = function()
		print("Tug of War auto-win activated")
	end
})

tugOfWarTab:Toggle({
	Title = "Auto Click",
	Default = false,
	Callback = function(state)
		print("Auto Click:", state)
	end
})

-- === HIDE AND SEEK TAB ===
local hideAndSeekTab = Window:Tab({
	Title = "Hide And Seek",
	Icon = "eye-off"
})

hideAndSeekTab:Button({
	Title = "Best Hiding Spot",
	Callback = function()
		print("Teleporting to best hiding spot")
	end
})

hideAndSeekTab:Button({
	Title = "Become Invisible",
	Callback = function()
		if LocalPlayer.Character then
			for _, part in pairs(LocalPlayer.Character:GetChildren()) do
				if part:IsA("BasePart") then
					part.Transparency = 1
				elseif part:IsA("Accessory") then
					part.Handle.Transparency = 1
				end
			end
		end
	end
})

hideAndSeekTab:Button({
	Title = "Become Visible",
	Callback = function()
		if LocalPlayer.Character then
			for _, part in pairs(LocalPlayer.Character:GetChildren()) do
				if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
					part.Transparency = 0
				elseif part:IsA("Accessory") then
					part.Handle.Transparency = 0
				end
			end
		end
	end
})

-- === JUMP ROPE/GLASS BRIDGE TAB ===
local jumpRopeTab = Window:Tab({
	Title = "Jump Rope/Glass Bridge",
	Icon = "activity"
})

jumpRopeTab:Button({
	Title = "Auto Jump Rope",
	Callback = function()
		print("Auto jump rope activated")
	end
})

jumpRopeTab:Button({
	Title = "Glass Bridge Path",
	Callback = function()
		print("Showing safe glass bridge path")
	end
})

jumpRopeTab:Slider({
	Title = "Jump Timing",
	Default = 5,
	Min = 1,
	Max = 10,
	Callback = function(value)
		print("Jump timing set to:", value)
	end
})

-- === MINGLE TAB ===
local mingleTab = Window:Tab({
	Title = "Mingle",
	Icon = "users"
})

mingleTab:Button({
	Title = "Auto Find Group",
	Callback = function()
		print("Auto finding mingle group")
	end
})

mingleTab:Button({
	Title = "Teleport to Center",
	Callback = function()
		print("Teleporting to mingle center")
	end
})

-- === RANDOM FEATURES TAB ===
local randomTab = Window:Tab({
	Title = "Random Features",
	Icon = "settings"
})

randomTab:Slider({
	Title = "WalkSpeed",
	Default = WalkSpeedValue,
	Min = 0,
	Max = 300,
	Callback = function(value)
		WalkSpeedValue = value
	end
})

randomTab:Slider({
	Title = "JumpPower",
	Default = JumpPowerValue,
	Min = 0,
	Max = 300,
	Callback = function(value)
		JumpPowerValue = value
	end
})

randomTab:Slider({
	Title = "Gravity",
	Default = workspace.Gravity,
	Min = 0,
	Max = 300,
	Callback = function(value)
		workspace.Gravity = value
	end
})

randomTab:Toggle({
	Title = "Enable Speed/Jump",
	Default = false,
	Callback = function(state)
		SpeedEnabled = state
	end
})

randomTab:Button({
	Title = "Fly",
	Callback = function()
		local character = LocalPlayer.Character
		if character and character:FindFirstChild("HumanoidRootPart") then
			local bodyVelocity = Instance.new("BodyVelocity")
			bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
			bodyVelocity.Velocity = Vector3.new(0, 0, 0)
			bodyVelocity.Parent = character.HumanoidRootPart
		end
	end
})

randomTab:Button({
	Title = "Noclip",
	Callback = function()
		if LocalPlayer.Character then
			for _, part in pairs(LocalPlayer.Character:GetChildren()) do
				if part:IsA("BasePart") then
					part.CanCollide = false
				end
			end
		end
	end
})

-- === REBEL TAB ===
local rebelTab = Window:Tab({
	Title = "Rebel",
	Icon = "shield"
})

rebelTab:Button({
	Title = "Kill All Guards",
	Callback = function()
		print("Attempting to eliminate guards")
	end
})

rebelTab:Button({
	Title = "Free All Players",
	Callback = function()
		print("Freeing all players")
	end
})

rebelTab:Toggle({
	Title = "God Mode",
	Default = false,
	Callback = function(state)
		if state then
			if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
				LocalPlayer.Character.Humanoid.MaxHealth = math.huge
				LocalPlayer.Character.Humanoid.Health = math.huge
			end
		else
			if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
				LocalPlayer.Character.Humanoid.MaxHealth = 100
				LocalPlayer.Character.Humanoid.Health = 100
			end
		end
	end
})

-- Apply Speed/Jump if enabled
RunService.RenderStepped:Connect(function()
	if SpeedEnabled and LocalPlayer.Character then
		local humanoid = LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if humanoid then
			humanoid.WalkSpeed = WalkSpeedValue
			humanoid.JumpPower = JumpPowerValue
		end
	end
end)
